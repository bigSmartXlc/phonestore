{"remainingRequest":"d:\\VUE\\VUE\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!d:\\VUE\\VUE\\vue_app_00\\src\\components\\subcomponents\\content.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"d:\\VUE\\VUE\\vue_app_00\\src\\components\\subcomponents\\content.vue","mtime":1564728587482},{"path":"d:\\VUE\\VUE\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":1564466830673},{"path":"d:\\VUE\\VUE\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1564466837739},{"path":"d:\\VUE\\VUE\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":1564466832645},{"path":"d:\\VUE\\VUE\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1564466830040},{"path":"d:\\VUE\\VUE\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1564466837739}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.con-title {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  background-color: #ccc;\r\n}\r\n",{"version":3,"sources":["content.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgGA;AACA;AACA;AACA;AACA","file":"content.vue","sourceRoot":"src\\components\\subcomponents","sourcesContent":["<template>\r\n  <div>\r\n    <!-- <h1>评论区</h1> -->\r\n    <hr />\r\n    <textarea placeholder=\"请输入你想要说的话，最多120字\" maxlength=\"120\" v-model=\"content\"></textarea>\r\n    <mt-button type=\"primary\" size=\"large\" @click=\"submitcontent\">发表评论</mt-button>\r\n    <div class=\"cont-list\" v-for=\"(item,i) of contentlist\" :key=\"i\">\r\n      <p class=\"con-title\">\r\n        <span>{{i+1}}楼</span>\r\n        <span>用户：{{item.username}}</span>\r\n        <span>发表时间：{{item.contenttime}}</span>\r\n      </p>\r\n      <p>{{item.content}}</p>\r\n    </div>\r\n    <mt-button type=\"danger\" size=\"large\">加载更多</mt-button>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      content: \"\",\r\n      floorid: \"\",\r\n      username: \"\",\r\n      contenttime: \"\",\r\n      contentlist: []\r\n    };\r\n  },\r\n  created() {\r\n    // console.log(this.$route.params.id)\r\n    this.loadcontent();\r\n  },\r\n  methods: {\r\n    loadcontent() {\r\n      this.axios\r\n        .get(\"http://127.0.0.1:3000/loadcontent\", {\r\n          params: { id: this.$route.params.id }\r\n        })\r\n        .then(result => {\r\n          // console.log(result.data);\r\n          this.contentlist = result.data;\r\n        });\r\n    },\r\n    submitcontent() {\r\n      if (this.content == \"\") {\r\n        this.$toast({\r\n          message: \"内容不能为空\", //内容\r\n          position: \"middle\", //位置\r\n          duration: 2000, //时间\r\n          iconClass: \"iconfont icon-food-cake\"\r\n        });\r\n        return;\r\n      }\r\n      var contenttime = new Date().toLocaleString();\r\n      var arr = {\r\n        content: this.content,\r\n        contentid: null,\r\n        contenttime,\r\n        newsid: this.$route.params.id,\r\n        username: \"匿名\"\r\n      };\r\n      console.log(this.contentlist);\r\n      (this.contentlist).unshift(arr);\r\n      this.axios\r\n        .get(\"http://127.0.0.1:3000/addcontent\", {\r\n          params: {\r\n            time: contenttime,\r\n            content: this.content,\r\n            id: this.$route.params.id\r\n          }\r\n        })\r\n        .then(result => {\r\n          console.log(result);\r\n          if (result.data == \"1\") {\r\n            this.$toast({\r\n              message: \"发表成功\", //内容\r\n              position: \"middle\", //位置\r\n              duration: 2000, //时间\r\n              iconClass: \"iconfont icon-food-cake\"\r\n            });\r\n            // this.loadcontent();\r\n            this.content = \"\";\r\n          } else {\r\n            this.$toast({\r\n              message: \"发表失败\", //内容\r\n              position: \"middle\", //位置\r\n              duration: 2000, //时间\r\n              iconClass: \"iconfont icon-food-cake\"\r\n            });\r\n          }\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.con-title {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  background-color: #ccc;\r\n}\r\n</style>\r\n"]}]}