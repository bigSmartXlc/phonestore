{"remainingRequest":"d:\\VUE\\VUE\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!d:\\VUE\\VUE\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!d:\\VUE\\VUE\\vue_app_00\\src\\components\\subcomponents\\content.vue?vue&type=script&lang=js","dependencies":[{"path":"d:\\VUE\\VUE\\vue_app_00\\src\\components\\subcomponents\\content.vue","mtime":1564728587482},{"path":"d:\\VUE\\VUE\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1564466830040},{"path":"d:\\VUE\\VUE\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1564466829890},{"path":"d:\\VUE\\VUE\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1564466837739}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      content: \"\",\n      floorid: \"\",\n      username: \"\",\n      contenttime: \"\",\n      contentlist: []\n    };\n  },\n  created: function created() {\n    // console.log(this.$route.params.id)\n    this.loadcontent();\n  },\n  methods: {\n    loadcontent: function loadcontent() {\n      var _this = this;\n\n      this.axios.get(\"http://127.0.0.1:3000/loadcontent\", {\n        params: {\n          id: this.$route.params.id\n        }\n      }).then(function (result) {\n        // console.log(result.data);\n        _this.contentlist = result.data;\n      });\n    },\n    submitcontent: function submitcontent() {\n      var _this2 = this;\n\n      if (this.content == \"\") {\n        this.$toast({\n          message: \"内容不能为空\",\n          //内容\n          position: \"middle\",\n          //位置\n          duration: 2000,\n          //时间\n          iconClass: \"iconfont icon-food-cake\"\n        });\n        return;\n      }\n\n      var contenttime = new Date().toLocaleString();\n      var arr = {\n        content: this.content,\n        contentid: null,\n        contenttime: contenttime,\n        newsid: this.$route.params.id,\n        username: \"匿名\"\n      };\n      console.log(this.contentlist);\n      this.contentlist.unshift(arr);\n      this.axios.get(\"http://127.0.0.1:3000/addcontent\", {\n        params: {\n          time: contenttime,\n          content: this.content,\n          id: this.$route.params.id\n        }\n      }).then(function (result) {\n        console.log(result);\n\n        if (result.data == \"1\") {\n          _this2.$toast({\n            message: \"发表成功\",\n            //内容\n            position: \"middle\",\n            //位置\n            duration: 2000,\n            //时间\n            iconClass: \"iconfont icon-food-cake\"\n          }); // this.loadcontent();\n\n\n          _this2.content = \"\";\n        } else {\n          _this2.$toast({\n            message: \"发表失败\",\n            //内容\n            position: \"middle\",\n            //位置\n            duration: 2000,\n            //时间\n            iconClass: \"iconfont icon-food-cake\"\n          });\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["content.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAkBA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,eAAA,EADA;AAEA,eAAA,EAFA;AAGA,gBAAA,EAHA;AAIA,mBAAA,EAJA;AAKA,mBAAA;AALA,KAAA;AAOA,GATA;AAUA,SAVA,qBAUA;AACA;AACA,SAAA,WAAA;AACA,GAbA;AAcA,WAAA;AACA,eADA,yBACA;AAAA;;AACA,WAAA,KAAA,CACA,GADA,CACA,mCADA,EACA;AACA,gBAAA;AAAA,cAAA,KAAA,MAAA,CAAA,MAAA,CAAA;AAAA;AADA,OADA,EAIA,IAJA,CAIA,kBAAA;AACA;AACA,cAAA,WAAA,GAAA,OAAA,IAAA;AACA,OAPA;AAQA,KAVA;AAWA,iBAXA,2BAWA;AAAA;;AACA,UAAA,KAAA,OAAA,IAAA,EAAA,EAAA;AACA,aAAA,MAAA,CAAA;AACA,mBAAA,QADA;AACA;AACA,oBAAA,QAFA;AAEA;AACA,oBAAA,IAHA;AAGA;AACA,qBAAA;AAJA,SAAA;AAMA;AACA;;AACA,UAAA,cAAA,IAAA,IAAA,GAAA,cAAA,EAAA;AACA,UAAA,MAAA;AACA,iBAAA,KAAA,OADA;AAEA,mBAAA,IAFA;AAGA,gCAHA;AAIA,gBAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAJA;AAKA,kBAAA;AALA,OAAA;AAOA,cAAA,GAAA,CAAA,KAAA,WAAA;AACA,WAAA,WAAA,CAAA,OAAA,CAAA,GAAA;AACA,WAAA,KAAA,CACA,GADA,CACA,kCADA,EACA;AACA,gBAAA;AACA,gBAAA,WADA;AAEA,mBAAA,KAAA,OAFA;AAGA,cAAA,KAAA,MAAA,CAAA,MAAA,CAAA;AAHA;AADA,OADA,EAQA,IARA,CAQA,kBAAA;AACA,gBAAA,GAAA,CAAA,MAAA;;AACA,YAAA,OAAA,IAAA,IAAA,GAAA,EAAA;AACA,iBAAA,MAAA,CAAA;AACA,qBAAA,MADA;AACA;AACA,sBAAA,QAFA;AAEA;AACA,sBAAA,IAHA;AAGA;AACA,uBAAA;AAJA,WAAA,EADA,CAOA;;;AACA,iBAAA,OAAA,GAAA,EAAA;AACA,SATA,MASA;AACA,iBAAA,MAAA,CAAA;AACA,qBAAA,MADA;AACA;AACA,sBAAA,QAFA;AAEA;AACA,sBAAA,IAHA;AAGA;AACA,uBAAA;AAJA,WAAA;AAMA;AACA,OA3BA;AA4BA;AA3DA;AAdA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <!-- <h1>评论区</h1> -->\r\n    <hr />\r\n    <textarea placeholder=\"请输入你想要说的话，最多120字\" maxlength=\"120\" v-model=\"content\"></textarea>\r\n    <mt-button type=\"primary\" size=\"large\" @click=\"submitcontent\">发表评论</mt-button>\r\n    <div class=\"cont-list\" v-for=\"(item,i) of contentlist\" :key=\"i\">\r\n      <p class=\"con-title\">\r\n        <span>{{i+1}}楼</span>\r\n        <span>用户：{{item.username}}</span>\r\n        <span>发表时间：{{item.contenttime}}</span>\r\n      </p>\r\n      <p>{{item.content}}</p>\r\n    </div>\r\n    <mt-button type=\"danger\" size=\"large\">加载更多</mt-button>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      content: \"\",\r\n      floorid: \"\",\r\n      username: \"\",\r\n      contenttime: \"\",\r\n      contentlist: []\r\n    };\r\n  },\r\n  created() {\r\n    // console.log(this.$route.params.id)\r\n    this.loadcontent();\r\n  },\r\n  methods: {\r\n    loadcontent() {\r\n      this.axios\r\n        .get(\"http://127.0.0.1:3000/loadcontent\", {\r\n          params: { id: this.$route.params.id }\r\n        })\r\n        .then(result => {\r\n          // console.log(result.data);\r\n          this.contentlist = result.data;\r\n        });\r\n    },\r\n    submitcontent() {\r\n      if (this.content == \"\") {\r\n        this.$toast({\r\n          message: \"内容不能为空\", //内容\r\n          position: \"middle\", //位置\r\n          duration: 2000, //时间\r\n          iconClass: \"iconfont icon-food-cake\"\r\n        });\r\n        return;\r\n      }\r\n      var contenttime = new Date().toLocaleString();\r\n      var arr = {\r\n        content: this.content,\r\n        contentid: null,\r\n        contenttime,\r\n        newsid: this.$route.params.id,\r\n        username: \"匿名\"\r\n      };\r\n      console.log(this.contentlist);\r\n      (this.contentlist).unshift(arr);\r\n      this.axios\r\n        .get(\"http://127.0.0.1:3000/addcontent\", {\r\n          params: {\r\n            time: contenttime,\r\n            content: this.content,\r\n            id: this.$route.params.id\r\n          }\r\n        })\r\n        .then(result => {\r\n          console.log(result);\r\n          if (result.data == \"1\") {\r\n            this.$toast({\r\n              message: \"发表成功\", //内容\r\n              position: \"middle\", //位置\r\n              duration: 2000, //时间\r\n              iconClass: \"iconfont icon-food-cake\"\r\n            });\r\n            // this.loadcontent();\r\n            this.content = \"\";\r\n          } else {\r\n            this.$toast({\r\n              message: \"发表失败\", //内容\r\n              position: \"middle\", //位置\r\n              duration: 2000, //时间\r\n              iconClass: \"iconfont icon-food-cake\"\r\n            });\r\n          }\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style>\r\n.con-title {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  background-color: #ccc;\r\n}\r\n</style>\r\n"],"sourceRoot":"src\\components\\subcomponents"}]}